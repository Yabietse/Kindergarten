<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math Learning Levels Quiz</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for a better look and feel */
        body {
            font-family: "Inter", sans-serif;
            background-color: #f0f4f8; /* Light blue-gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh; /* Ensure it takes full viewport height */
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .container {
            background-color: #ffffff;
            border-radius: 1rem; /* Rounded corners */
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1); /* Soft shadow */
            padding: 2.5rem;
            max-width: 600px;
            width: 100%;
            text-align: center;
        }
        .list-item, .button {
            transition: all 0.2s ease-in-out; /* Smooth transitions for hover effects */
        }
        .list-item:hover {
            transform: translateY(-3px); /* Slight lift on hover */
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15);
        }
        /* Custom modal for alerts */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1000; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        .option-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            border: 1px solid #cbd5e0; /* Light gray border */
            border-radius: 0.5rem;
            margin-bottom: 0.75rem;
            cursor: pointer;
            background-color: #f8fafc; /* Very light blue-gray */
            transition: background-color 0.2s ease-in-out, border-color 0.2s ease-in-out;
            text-align: left;
        }
        .option-item:hover {
            background-color: #e2e8f0; /* Slightly darker on hover */
            border-color: #93c5fd; /* Blue border on hover */
        }
        .option-item input[type="radio"] {
            margin-right: 1rem;
            cursor: pointer;
            accent-color: #3b82f6; /* Blue accent for radio button */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-3xl font-bold text-gray-800 mb-8">Math Learning Levels</h1>

        <!-- Level List Section -->
        <div id="level-list" class="space-y-4">
            <!-- List items will be dynamically inserted here by JavaScript -->
        </div>

        <!-- Quiz Section (initially hidden) -->
        <div id="quiz-section" class="hidden text-left">
            <button id="back-button" class="button bg-gray-200 text-gray-700 px-4 py-2 rounded-lg mb-6 hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-opacity-75">
                ‚Üê Back to Levels
            </button>
            <p id="level-title" class="text-2xl font-semibold text-blue-700 mb-6"></p>
            <p id="question-number" class="text-lg text-gray-600 mb-2"></p>
            <p id="question-display" class="text-xl text-gray-800 mb-6"></p>

            <!-- Options container for multiple choice -->
            <div id="options-container" class="space-y-3 mb-4">
                <!-- Multiple choice options will be inserted here by JavaScript -->
            </div>

            <button id="submit-answer" class="button bg-blue-600 text-white px-6 py-3 rounded-lg w-full hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">
                Submit Answer
            </button>
            <button id="next-question" class="button bg-green-500 text-white px-6 py-3 rounded-lg w-full mt-4 hidden hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-75">
                Next Question
            </button>
            <p id="feedback-display" class="text-lg mt-4 font-medium"></p>
            <p id="quiz-complete-message" class="text-2xl text-green-700 font-bold mt-8 hidden">
                Quiz Complete! Great Job!
            </p>
        </div>
    </div>

    <!-- Custom Modal for Messages -->
    <div id="myModal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <p id="modal-message" class="text-lg text-gray-800"></p>
            <button id="modal-ok-button" class="button bg-blue-600 text-white px-4 py-2 rounded-lg mt-4 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-75">OK</button>
        </div>
    </div>

    <script type="module">
        // Import Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Firebase configuration and initialization (MANDATORY in Canvas, optional for local run without persistence)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id'; // Use a dummy for local execution
        const firebaseConfigRaw = typeof __firebase_config !== 'undefined' ? __firebase_config : '{}';
        let firebaseConfig = {};
        let firebaseEnabled = false;

        // Attempt to parse firebaseConfig. If it's an empty object, Firebase will not be initialized.
        try {
            firebaseConfig = JSON.parse(firebaseConfigRaw);
            // Check if the parsed config actually has keys (meaning it's not just an empty object from Canvas default)
            if (Object.keys(firebaseConfig).length > 0) {
                firebaseEnabled = true;
            } else {
                console.warn("No Firebase configuration provided or config is empty. Persistence will be disabled.");
            }
        } catch (e) {
            console.error("Error parsing Firebase config:", e);
            console.warn("Firebase will be disabled due to config error. Persistence will not work.");
        }

        let app, db, auth, userId;
        let firebaseInitialized = false; // Flag to track successful Firebase initialization

        // Function to show custom modal
        function showModal(message) {
            const modal = document.getElementById('myModal');
            const modalMessage = document.getElementById('modal-message');
            modalMessage.textContent = message;
            modal.style.display = 'flex'; // Use flex to center
        }

        // Helper function to shuffle an array
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Firestore: Save user's last selected level and question index
        async function saveUserProgress(uid, levelId, questionIndex) {
            if (!firebaseInitialized || !db) { // Check firebaseInitialized
                console.warn("Firebase is not initialized. Progress will not be saved.");
                return;
            }
            const userDocRef = doc(db, `artifacts/${appId}/users/${uid}/progress`, 'lastQuizState');
            try {
                await setDoc(userDocRef, {
                    lastLevelId: levelId,
                    lastQuestionIndex: questionIndex
                }, { merge: true });
                console.log(`User ${uid} progress saved: Level ${levelId}, Question ${questionIndex}`);
            } catch (e) {
                console.error("Error saving document: ", e);
                showModal("Failed to save progress. Please check your internet connection.");
            }
        }

        // Firestore: Load user's last selected level and question index and resume
        async function loadUserProgress(uid) {
            if (!firebaseInitialized || !db) { // Check firebaseInitialized
                console.warn("Firebase is not initialized. Progress will not be loaded.");
                return;
            }
            const userDocRef = doc(db, `artifacts/${appId}/users/${uid}/progress`, 'lastQuizState');
            try {
                const docSnap = await getDoc(userDocRef);
                if (docSnap.exists()) {
                    const data = docSnap.data();
                    const lastLevelId = data.lastLevelId;
                    const lastQuestionIndex = data.lastQuestionIndex || 0; // Default to 0 if not set

                    const lastLevel = levels.find(level => level.id === lastLevelId);
                    if (lastLevel) {
                        // Check if the saved index is within bounds of the current questions for that level
                        const effectiveIndex = Math.min(lastQuestionIndex, lastLevel.questions.length);
                        if (effectiveIndex < lastLevel.questions.length) {
                            showModal(`Welcome back! Resuming ${lastLevel.name} from Question ${effectiveIndex + 1}.`);
                            showQuiz(lastLevel, effectiveIndex);
                        } else {
                            // If saved index is past the end, start at beginning of that level
                            showModal(`Welcome back! You completed ${lastLevel.name}. Starting over.`);
                            showQuiz(lastLevel, 0);
                        }
                        console.log(`User ${uid} last quiz state loaded: Level ${lastLevelId}, Question ${effectiveIndex}`);
                    }
                }
            } catch (e) {
                console.error("Error loading document: ", e);
                showModal("Failed to load previous progress.");
            }
        }


        // Get modal elements
        const modal = document.getElementById('myModal');
        const closeButton = document.querySelector('.close-button');
        const modalOkButton = document.getElementById('modal-ok-button');

        // Close modal when close button is clicked
        closeButton.onclick = function() {
            modal.style.display = 'none';
        }

        // Close modal when OK button is clicked
        modalOkButton.onclick = function() {
            modal.style.display = 'none';
        }

        // Close modal when clicking outside of it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        document.addEventListener('DOMContentLoaded', async () => {
            if (firebaseEnabled) {
                try {
                    // Initialize Firebase
                    app = initializeApp(firebaseConfig);
                    db = getFirestore(app);
                    auth = getAuth(app);

                    // Sign in anonymously or with custom token (MANDATORY for persistence)
                    const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } else {
                        await signInAnonymously(auth);
                    }

                    // Get the user ID after authentication
                    userId = auth.currentUser?.uid || crypto.randomUUID();
                    console.log("Firebase initialized. User ID:", userId);
                    firebaseInitialized = true; // Set flag to true on success

                } catch (error) {
                    console.error("Error initializing Firebase services:", error);
                    showModal("Failed to initialize Firebase services. The app will run without saving progress. If you wish to enable persistence, please ensure your Firebase project is correctly configured.");
                    firebaseInitialized = false; // Ensure flag is false on error
                }
            } else {
                console.log("Firebase is not enabled (no configuration found). The app will run without saving/loading progress.");
            }

            // Always initialize the app logic, regardless of Firebase status
            initApp();

            // Load user progress ONLY if Firebase was successfully initialized
            if (firebaseInitialized) {
                loadUserProgress(userId);
            }
        });

        function initApp() {
            // Data structure for levels and questions
            const levels = [
                {
                    name: "Math for Kindergarten",
                    id: "kindergarten_math",
                    questions: [
                        { question: "What is 1 + 1?", options: ["1", "2", "3", "4"], answer: "2" },
                        { question: "How many fingers on one hand?", options: ["3", "4", "5", "6"], answer: "5" },
                        { question: "What comes after 3?", options: ["1", "2", "4", "5"], answer: "4" },
                        { question: "If you have 2 apples and get 1 more, how many do you have?", options: ["2", "3", "4", "5"], answer: "3" },
                        { question: "What shape is a square?", options: ["Round", "Triangle", "Box", "Long"], answer: "Box" },
                        { question: "Count to 5: One, Two, Three, Four, ______?", options: ["Six", "Seven", "Five", "Eight"], answer: "Five" },
                        { question: "What is 2 - 1?", options: ["0", "1", "2", "3"], answer: "1" },
                        { question: "How many wheels does a car have?", options: ["2", "3", "4", "5"], answer: "4" },
                        { question: "Which number is smaller: 7 or 4?", options: ["7", "4", "Both", "Neither"], answer: "4" },
                        { question: "What is 3 + 2?", options: ["4", "5", "6", "7"], answer: "5" },
                        { question: "What number comes before 10?", options: ["8", "9", "11", "12"], answer: "9" },
                        { question: "How many eyes do you have?", options: ["1", "2", "3", "4"], answer: "2" },
                        { question: "What is 5 - 2?", options: ["2", "3", "4", "5"], answer: "3" },
                        { question: "If you have 3 red balls and 2 blue balls, how many balls in total?", options: ["4", "5", "6", "7"], answer: "5" },
                        { question: "Which shape has no corners?", options: ["Square", "Triangle", "Circle", "Rectangle"], answer: "Circle" },
                        { question: "What is 4 + 1?", options: ["3", "4", "5", "6"], answer: "5" },
                        { question: "Count to 10: One, Two, ..., Nine, ______?", options: ["Eleven", "Twelve", "Ten", "Thirteen"], answer: "Ten" },
                        { question: "What is 6 - 3?", options: ["2", "3", "4", "5"], answer: "3" },
                        { question: "How many legs does a dog have?", options: ["2", "3", "4", "5"], answer: "4" },
                        { question: "Which number is bigger: 2 or 8?", options: ["2", "8", "Both", "Neither"], answer: "8" },
                        { question: "What is 1 + 0?", options: ["0", "1", "2", "10"], answer: "1" },
                        { question: "If you have 4 cookies and eat 1, how many are left?", options: ["2", "3", "4", "5"], answer: "3" },
                        { question: "What comes before 7?", options: ["5", "6", "8", "9"], answer: "6" },
                        { question: "What is 3 + 3?", options: ["5", "6", "7", "8"], answer: "6" },
                        { question: "How many wings does a bird have?", options: ["1", "2", "3", "4"], answer: "2" },
                        { question: "What is 8 - 4?", options: ["3", "4", "5", "6"], answer: "4" },
                        { question: "Which shape is like a can?", options: ["Sphere", "Cube", "Cylinder", "Cone"], answer: "Cylinder" },
                        { question: "What is 7 + 0?", options: ["0", "7", "70", "700"], answer: "7" },
                        { question: "Count by 1s from 1 to 5: 1, 2, 3, 4, ______?", options: ["6", "5", "7", "8"], answer: "5" },
                        { question: "What is 9 - 1?", options: ["7", "8", "9", "10"], answer: "8" },
                        { question: "If you have 5 candies and give 2 away, how many do you have?", options: ["2", "3", "4", "5"], answer: "3" },
                        { question: "What is 4 + 2?", options: ["5", "6", "7", "8"], answer: "6" },
                        { question: "How many ears do you have?", options: ["1", "2", "3", "4"], answer: "2" },
                        { question: "What is 10 - 2?", options: ["7", "8", "9", "11"], answer: "8" },
                        { question: "Which number is an odd number: 2, 4, 5, 6?", options: ["2", "4", "5", "6"], answer: "5" },
                        { question: "What is 6 + 3?", options: ["8", "9", "10", "11"], answer: "9" },
                        { question: "If there are 5 birds on a tree and 2 fly away, how many are left?", options: ["2", "3", "4", "5"], answer: "3" },
                        { question: "What comes after 9?", options: ["7", "8", "10", "11"], answer: "10" },
                        { question: "What is 5 + 5?", options: ["8", "9", "10", "11"], answer: "10" },
                        { question: "How many sides does a triangle have?", options: ["2", "3", "4", "5"], answer: "3" },
                        { question: "What is 7 - 5?", options: ["1", "2", "3", "4"], answer: "2" },
                        { question: "If you have 4 red flowers and 3 yellow flowers, how many flowers in total?", options: ["6", "7", "8", "9"], answer: "7" },
                        { question: "Which number is an even number: 1, 3, 5, 8?", options: ["1", "3", "5", "8"], answer: "8" },
                        { question: "What is 8 + 1?", options: ["8", "9", "10", "11"], answer: "9" },
                        { question: "Count by 5s to 20: 5, 10, 15, ______?", options: ["18", "19", "20", "25"], answer: "20" },
                        { question: "What is 10 - 4?", options: ["5", "6", "7", "8"], answer: "6" },
                        { question: "If a cat has 4 paws, how many paws do 2 cats have?", options: ["4", "6", "8", "10"], answer: "8" },
                        { question: "What is 2 + 7?", options: ["8", "9", "10", "11"], answer: "9" },
                        { question: "Which number is bigger: 11 or 1?", options: ["11", "1", "Both", "Neither"], answer: "11" },
                        { question: "What is 6 - 0?", options: ["0", "5", "6", "7"], answer: "6" }
                    ]
                },
                {
                    name: "Math for KG 1",
                    id: "kg1_math",
                    questions: [
                        { question: "What is 5 + 3?", options: ["7", "8", "9", "10"], answer: "8" },
                        { question: "If you have 6 cookies and eat 2, how many are left?", options: ["3", "4", "5", "6"], answer: "4" },
                        { question: "What is 10 - 5?", options: ["4", "5", "6", "7"], answer: "5" },
                        { question: "Which shape has three sides?", options: ["Square", "Circle", "Triangle", "Rectangle"], answer: "Triangle" },
                        { question: "What is 4 + 4?", options: ["6", "7", "8", "9"], answer: "8" },
                        { question: "Count by 2s: 2, 4, 6, ______?", options: ["7", "8", "9", "10"], answer: "8" },
                        { question: "What is 7 - 3?", options: ["3", "4", "5", "6"], answer: "4" },
                        { question: "If a dozen eggs is 12, how many is half a dozen?", options: ["4", "6", "8", "10"], answer: "6" },
                        { question: "What is 9 + 1?", options: ["8", "9", "10", "11"], answer: "10" },
                        { question: "Which number is bigger: 15 or 12?", options: ["15", "12", "Both", "Neither"], answer: "15" },
                        { question: "What is 11 + 2?", options: ["12", "13", "14", "15"], answer: "13" },
                        { question: "If you have 10 balloons and 3 fly away, how many are left?", options: ["6", "7", "8", "9"], answer: "7" },
                        { question: "What is 18 - 8?", options: ["9", "10", "11", "12"], answer: "10" },
                        { question: "How many corners does a triangle have?", options: ["2", "3", "4", "5"], answer: "3" },
                        { question: "What is 5 x 2?", options: ["7", "8", "10", "12"], answer: "10" },
                        { question: "What is half of 12?", options: ["4", "5", "6", "7"], answer: "6" },
                        { question: "What is 14 + 6?", options: ["19", "20", "21", "22"], answer: "20" },
                        { question: "If you have 2 groups of 5 pencils, how many pencils in total?", options: ["7", "8", "10", "12"], answer: "10" },
                        { question: "What is 20 divided by 4?", options: ["3", "4", "5", "6"], answer: "5" },
                        { question: "Which number is an odd number: 14, 16, 17, 18?", options: ["14", "16", "17", "18"], answer: "17" },
                        { question: "What is 13 + 7?", options: ["19", "20", "21", "22"], answer: "20" },
                        { question: "If you have 20 stickers and give 5 away, how many are left?", options: ["13", "14", "15", "16"], answer: "15" },
                        { question: "What is 25 - 10?", options: ["10", "12", "15", "18"], answer: "15" },
                        { question: "How many sides does a pentagon have?", options: ["4", "5", "6", "7"], answer: "5" },
                        { question: "What is 8 x 3?", options: ["21", "22", "23", "24"], answer: "24" },
                        { question: "What is double of 9?", options: ["16", "17", "18", "19"], answer: "18" },
                        { question: "What is 17 + 8?", options: ["23", "24", "25", "26"], answer: "25" },
                        { question: "If you have 3 baskets, and each basket has 6 eggs, how many eggs in total?", options: ["15", "16", "18", "20"], answer: "18" },
                        { question: "What is 30 divided by 5?", options: ["4", "5", "6", "7"], answer: "6" },
                        { question: "Which number is bigger: 21 or 19?", options: ["21", "19", "Both", "Neither"], answer: "21" },
                        { question: "What is 19 + 6?", options: ["23", "24", "25", "26"], answer: "25" },
                        { question: "If you have 18 crayons and use 7, how many are left?", options: ["9", "10", "11", "12"], answer: "11" },
                        { question: "What is 35 - 15?", options: ["15", "18", "20", "22"], answer: "20" },
                        { question: "How many sides does a hexagon have?", options: ["5", "6", "7", "8"], answer: "6" },
                        { question: "What is 9 x 2?", options: ["16", "17", "18", "19"], answer: "18" },
                        { question: "What is one-third of 15?", options: ["3", "4", "5", "6"], answer: "5" },
                        { question: "What is 22 + 9?", options: ["30", "31", "32", "33"], answer: "31" },
                        { question: "If you have 4 boxes, and each box has 6 toy cars, how many toy cars in total?", options: ["20", "22", "24", "26"], answer: "24" },
                        { question: "What is 40 divided by 8?", options: ["4", "5", "6", "7"], answer: "5" },
                        { question: "Which number is an even number: 25, 27, 29, 30?", options: ["25", "27", "29", "30"], answer: "30" },
                        { question: "What is 28 + 12?", options: ["39", "40", "41", "42"], answer: "40" },
                        { question: "If you have 40 marbles and lose 15, how many are left?", options: ["20", "22", "25", "30"], answer: "25" },
                        { question: "What is 50 - 20?", options: ["25", "28", "30", "35"], answer: "30" },
                        { question: "How many minutes are in half an hour?", options: ["15", "20", "30", "60"], answer: "30" },
                        { question: "What is 10 x 5?", options: ["40", "45", "50", "55"], answer: "50" },
                        { question: "What is one-quarter of 20?", options: ["4", "5", "6", "7"], answer: "5" },
                        { question: "What is 33 + 17?", options: ["45", "48", "50", "52"], answer: "50" },
                        { question: "If a bookshelf has 5 shelves, and each shelf has 10 books, how many books in total?", options: ["15", "40", "50", "60"], answer: "50" },
                        { question: "What is 49 divided by 7?", options: ["5", "6", "7", "8"], answer: "7" },
                        { question: "Which number is smaller: 35 or 42?", options: ["35", "42", "Both", "Neither"], answer: "35" }
                    ]
                },
                {
                    name: "Math for KG 2",
                    id: "kg2_math",
                    questions: [
                        { question: "What is 12 + 8?", options: ["18", "19", "20", "21"], answer: "20" },
                        { question: "If you have 15 crayons and lose 5, how many are left?", options: ["9", "10", "11", "12"], answer: "10" },
                        { question: "What is 20 - 7?", options: ["11", "12", "13", "14"], answer: "13" },
                        { question: "How many sides does a rectangle have?", options: ["2", "3", "4", "5"], answer: "4" },
                        { question: "What is 6 x 2?", options: ["8", "10", "12", "14"], answer: "12" },
                        { question: "What is half of 10?", options: ["4", "5", "6", "7"], answer: "5" },
                        { question: "What is 15 + 10?", options: ["20", "25", "30", "35"], answer: "25" },
                        { question: "If you have 3 bags, and each bag has 4 apples, how many apples do you have in total?", options: ["7", "9", "12", "16"], answer: "12" },
                        { question: "What is 25 divided by 5?", options: ["3", "4", "5", "6"], answer: "5" },
                        { question: "Which number is an odd number: 8, 10, 13, 16?", options: ["8", "10", "13", "16"], answer: "13" },
                        { question: "What is 30 + 15?", options: ["40", "45", "50", "55"], answer: "45" },
                        { question: "If you have 22 marbles and 7 roll away, how many are left?", options: ["13", "15", "17", "19"], answer: "15" },
                        { question: "What is 45 - 20?", options: ["20", "25", "30", "35"], answer: "25" },
                        { question: "How many sides does a square have?", options: ["3", "4", "5", "6"], answer: "4" },
                        { question: "What is 7 x 4?", options: ["24", "26", "28", "30"], answer: "28" },
                        { question: "What is double of 15?", options: ["25", "30", "35", "40"], answer: "30" },
                        { question: "What is 50 + 25?", options: ["70", "75", "80", "85"], answer: "75" },
                        { question: "If there are 4 boxes of donuts, and each box has 8 donuts, how many donuts in total?", options: ["28", "30", "32", "34"], answer: "32" },
                        { question: "What is 42 divided by 6?", options: ["5", "6", "7", "8"], answer: "7" },
                        { question: "Which number is an even number: 29, 31, 33, 34?", options: ["29", "31", "33", "34"], answer: "34" },
                        { question: "What is 65 + 10?", options: ["70", "75", "80", "85"], answer: "75" },
                        { question: "If you have $30 and buy a toy for $12, how much money is left?", options: ["$15", "$18", "$20", "$22"], answer: "$18" },
                        { question: "What is 70 - 35?", options: ["30", "35", "40", "45"], answer: "35" },
                        { question: "How many corners does a cube have?", options: ["4", "6", "8", "12"], answer: "8" },
                        { question: "What is 8 x 5?", options: ["35", "40", "45", "50"], answer: "40" },
                        { question: "What is one-third of 24?", options: ["6", "7", "8", "9"], answer: "8" },
                        { question: "What is 80 + 20?", options: ["90", "95", "100", "110"], answer: "100" },
                        { question: "If a class has 5 rows, and each row has 7 students, how many students in total?", options: ["30", "32", "35", "38"], answer: "35" },
                        { question: "What is 54 divided by 9?", options: ["5", "6", "7", "8"], answer: "6" },
                        { question: "Which number is smaller: 55 or 60?", options: ["55", "60", "Both", "Neither"], answer: "55" },
                        { question: "What is 90 + 10?", options: ["95", "100", "105", "110"], answer: "100" },
                        { question: "If a tree has 75 leaves and 25 fall off, how many are left?", options: ["40", "45", "50", "55"], answer: "50" },
                        { question: "What is 100 - 40?", options: ["50", "60", "70", "80"], answer: "60" },
                        { question: "How many minutes are in one hour?", options: ["30", "45", "60", "90"], answer: "60" },
                        { question: "What is 11 x 3?", options: ["30", "33", "36", "39"], answer: "33" },
                        { question: "What is one-quarter of 36?", options: ["7", "8", "9", "10"], answer: "9" },
                        { question: "What is 125 + 75?", options: ["180", "190", "200", "210"], answer: "200" },
                        { question: "If a box contains 12 packs of cards, and each pack has 5 cards, how many cards in total?", options: ["50", "55", "60", "65"], answer: "60" },
                        { question: "What is 63 divided by 7?", options: ["7", "8", "9", "10"], answer: "9" },
                        { question: "Which number is divisible by 2: 41, 43, 45, 48?", options: ["41", "43", "45", "48"], answer: "48" },
                        { question: "What is 150 + 50?", options: ["190", "200", "210", "220"], answer: "200" },
                        { question: "If you have $80 and spend $35, how much money is left?", options: ["$40", "$45", "$50", "$55"], answer: "$45" },
                        { question: "What is 200 - 80?", options: ["100", "110", "120", "130"], answer: "120" },
                        { question: "What is the area of a square with a side of 6 cm?", options: ["12 sq cm", "24 sq cm", "30 sq cm", "36 sq cm"], answer: "36 sq cm" },
                        { question: "What is 13 x 2?", options: ["24", "26", "28", "30"], answer: "26" },
                        { question: "What is 50% of 40?", options: ["10", "15", "20", "25"], answer: "20" },
                        { question: "What is 230 + 70?", options: ["290", "300", "310", "320"], answer: "300" },
                        { question: "If a garden has 9 rows of 9 plants, how many plants in total?", options: ["72", "78", "81", "85"], answer: "81" },
                        { question: "What is 72 divided by 8?", options: ["7", "8", "9", "10"], answer: "9" },
                        { question: "Which number is a composite number: 2, 3, 5, 9?", options: ["2", "3", "5", "9"], answer: "9" }
                    ]
                },
                {
                    name: "Math for KG 3",
                    id: "kg3_math",
                    questions: [
                        { question: "What is 25 + 15?", options: ["30", "35", "40", "45"], answer: "40" },
                        { question: "If you have 30 candies and share 10 with a friend, how many do you have left?", options: ["15", "20", "25", "30"], answer: "20" },
                        { question: "What is 50 - 25?", options: ["20", "25", "30", "35"], answer: "25" },
                        { question: "How many corners does a circle have?", options: ["0", "1", "2", "4"], answer: "0" },
                        { question: "What is 7 x 3?", options: ["18", "21", "24", "27"], answer: "21" },
                        { question: "What is a quarter of 100?", options: ["10", "25", "50", "75"], answer: "25" },
                        { question: "What is 45 + 55?", options: ["90", "95", "100", "105"], answer: "100" },
                        { question: "If you buy 5 packs of gum, and each pack has 5 pieces, how many pieces of gum do you have?", options: ["10", "15", "20", "25"], answer: "25" },
                        { question: "What is 36 divided by 6?", options: ["4", "5", "6", "7"], answer: "6" },
                        { question: "Which number is an even number: 21, 23, 24, 27?", options: ["21", "23", "24", "27"], answer: "24" },
                        { question: "What is 75 + 25?", options: ["90", "95", "100", "105"], answer: "100" },
                        { question: "If you have $50 and spend $15, how much money is left?", options: ["$30", "$35", "$40", "$45"], answer: "$35" },
                        { question: "What is 100 - 30?", options: ["60", "70", "80", "90"], answer: "70" },
                        { question: "What is the perimeter of a rectangle with length 10 cm and width 5 cm?", options: ["15 cm", "20 cm", "25 cm", "30 cm"], answer: "30 cm" },
                        { question: "What is 8 x 6?", options: ["42", "48", "54", "60"], answer: "48" },
                        { question: "What is 20% of 50?", options: ["5", "10", "15", "20"], answer: "10" },
                        { question: "What is 120 + 30?", options: ["140", "150", "160", "170"], answer: "150" },
                        { question: "A farmer has 7 rows of 8 corn plants. How many corn plants in total?", options: ["50", "52", "56", "60"], answer: "56" },
                        { question: "What is 72 divided by 9?", options: ["6", "7", "8", "9"], answer: "8" },
                        { question: "Which number is a prime number: 1, 4, 7, 9?", options: ["1", "4", "7", "9"], answer: "7" },
                        { question: "What is 150 + 60?", options: ["200", "210", "220", "230"], answer: "210" },
                        { question: "If you have 120 stickers and give 40 away, how many are left?", options: ["70", "80", "90", "100"], answer: "80" },
                        { question: "What is 200 - 75?", options: ["115", "120", "125", "130"], answer: "125" },
                        { question: "How many legs do 5 chairs have?", options: ["15", "20", "25", "30"], answer: "20" },
                        { question: "What is 9 x 7?", options: ["54", "56", "63", "72"], answer: "63" },
                        { question: "What is one-fifth of 100?", options: ["10", "15", "20", "25"], answer: "20" },
                        { question: "What is 230 + 70?", options: ["290", "300", "310", "320"], answer: "300" },
                        { question: "If a baker bakes 9 trays of cookies, and each tray has 10 cookies, how many cookies in total?", options: ["80", "85", "90", "95"], answer: "90" },
                        { question: "What is 84 divided by 7?", options: ["10", "11", "12", "13"], answer: "12" },
                        { question: "Which number is divisible by 10: 105, 110, 115, 121?", options: ["105", "110", "115", "121"], answer: "110" },
                        { question: "What is 300 + 150?", options: ["400", "450", "500", "550"], answer: "450" },
                        { question: "If you buy a book for $18 and pay with a $20 bill, how much change do you get?", options: ["$1", "$2", "$3", "$4"], answer: "$2" },
                        { question: "What is 250 - 120?", options: ["110", "120", "130", "140"], answer: "130" },
                        { question: "What is the area of a triangle with base 10 cm and height 4 cm?", options: ["14 sq cm", "20 sq cm", "40 sq cm", "50 sq cm"], answer: "20 sq cm" },
                        { question: "What is 12 x 8?", options: ["84", "96", "108", "120"], answer: "96" },
                        { question: "What is 25% of 80?", options: ["10", "15", "20", "25"], answer: "20" },
                        { question: "What is 350 + 250?", options: ["500", "550", "600", "650"], answer: "600" },
                        { question: "If each student needs 3 pencils, and there are 15 students, how many pencils are needed?", options: ["40", "42", "45", "48"], answer: "45" },
                        { question: "What is 96 divided by 8?", options: ["10", "11", "12", "13"], answer: "12" },
                        { question: "Which number is an odd number: 100, 102, 103, 104?", options: ["100", "102", "103", "104"], answer: "103" },
                        { question: "What is 400 + 300?", options: ["600", "700", "800", "900"], answer: "700" },
                        { question: "If a marathon is 26 miles long and you've run 10 miles, how many miles are left?", options: ["14", "15", "16", "17"], answer: "16" },
                        { question: "What is 500 - 150?", options: ["300", "350", "400", "450"], answer: "350" },
                        { question: "How many sides does an octagon have?", options: ["6", "7", "8", "9"], answer: "8" },
                        { question: "What is 15 x 6?", options: ["80", "85", "90", "95"], answer: "90" },
                        { question: "What is 75% of 40?", options: ["20", "25", "30", "35"], answer: "30" },
                        { question: "What is 480 + 120?", options: ["500", "550", "600", "650"], answer: "600" },
                        { question: "If a building has 10 floors, and each floor has 12 apartments, how many apartments in total?", options: ["110", "120", "130", "140"], answer: "120" },
                        { question: "What is 108 divided by 9?", options: ["10", "11", "12", "13"], answer: "12" },
                        { question: "Which number is a perfect square: 10, 16, 20, 24?", options: ["10", "16", "20", "24"], answer: "16" }
                    ]
                },
                {
                    name: "Math for 1st Grade",
                    id: "grade1_math",
                    questions: [
                        { question: "What is 100 + 50?", options: ["120", "130", "140", "150"], answer: "150" },
                        { question: "If you have $25 and spend $12, how much money do you have left?", options: ["$10", "$12", "$13", "$15"], answer: "$13" },
                        { question: "What is 75 - 20?", options: ["50", "55", "60", "65"], answer: "55" },
                        { question: "What is the perimeter of a square with a side length of 5 cm?", options: ["10 cm", "15 cm", "20 cm", "25 cm"], answer: "20 cm" },
                        { question: "What is 9 x 4?", options: ["32", "36", "40", "45"], answer: "36" },
                        { question: "What is one-third of 30?", options: ["5", "10", "15", "20"], answer: "10" },
                        { question: "What is 120 + 80?", options: ["180", "190", "200", "210"], answer: "200" },
                        { question: "If a box contains 6 rows of 7 chocolates, how many chocolates are there?", options: ["36", "42", "48", "54"], answer: "42" },
                        { question: "What is 81 divided by 9?", options: ["7", "8", "9", "10"], answer: "9" },
                        { question: "Which number is divisible by 5: 32, 35, 38, 41?", options: ["32", "35", "38", "41"], answer: "35" },
                        { question: "What is 200 + 120?", options: ["300", "310", "320", "330"], answer: "320" },
                        { question: "If you have $60 and spend $25, how much money do you have left?", options: ["$30", "$35", "$40", "$45"], answer: "$35" },
                        { question: "What is 90 - 45?", options: ["40", "45", "50", "55"], answer: "45" },
                        { question: "What is the area of a rectangle with length 12 cm and width 4 cm?", options: ["16 sq cm", "24 sq cm", "36 sq cm", "48 sq cm"], answer: "48 sq cm" },
                        { question: "What is 10 x 8?", options: ["70", "75", "80", "85"], answer: "80" },
                        { question: "What is 50% of 70?", options: ["25", "30", "35", "40"], answer: "35" },
                        { question: "What is 250 + 150?", options: ["350", "400", "450", "500"], answer: "400" },
                        { question: "A theatre has 8 rows, and each row has 10 seats. How many seats in total?", options: ["70", "75", "80", "85"], answer: "80" },
                        { question: "What is 100 divided by 10?", options: ["8", "9", "10", "11"], answer: "10" },
                        { question: "Which number is a multiple of 3: 14, 16, 18, 20?", options: ["14", "16", "18", "20"], answer: "18" },
                        { question: "What is 300 + 250?", options: ["500", "520", "550", "580"], answer: "550" },
                        { question: "If you collect 150 stamps and sell 50, how many are left?", options: ["90", "100", "110", "120"], answer: "100" },
                        { question: "What is 180 - 60?", options: ["100", "110", "120", "130"], answer: "120" },
                        { question: "How many hours are in 2 days?", options: ["24", "36", "48", "60"], answer: "48" },
                        { question: "What is 11 x 7?", options: ["70", "77", "84", "91"], answer: "77" },
                        { question: "What is one-quarter of 60?", options: ["10", "12", "15", "20"], answer: "15" },
                        { question: "What is 350 + 150?", options: ["450", "500", "550", "600"], answer: "500" },
                        { question: "If a school has 7 classes, and each class has 20 students, how many students in total?", options: ["120", "130", "140", "150"], answer: "140" },
                        { question: "What is 120 divided by 12?", options: ["8", "9", "10", "11"], answer: "10" },
                        { question: "Which number is an even number: 101, 103, 105, 108?", options: ["101", "103", "105", "108"], answer: "108" },
                        { question: "What is 400 + 300?", options: ["600", "700", "800", "900"], answer: "700" },
                        { question: "If you drove 80 miles and have 20 miles left, what is the total distance?", options: ["90", "100", "110", "120"], answer: "100" },
                        { question: "What is 220 - 70?", options: ["140", "150", "160", "170"], answer: "150" },
                        { question: "What is the perimeter of a rectangle with length 15 cm and width 5 cm?", options: ["20 cm", "30 cm", "40 cm", "50 cm"], answer: "40 cm" },
                        { question: "What is 12 x 5?", options: ["50", "55", "60", "65"], answer: "60" },
                        { question: "What is 10% of 200?", options: ["10", "20", "30", "40"], answer: "20" },
                        { question: "What is 500 + 250?", options: ["700", "750", "800", "850"], answer: "750" },
                        { question: "If a team scored 5 points per game and played 10 games, how many points in total?", options: ["40", "45", "50", "55"], answer: "50" },
                        { question: "What is 132 divided by 11?", options: ["10", "11", "12", "13"], answer: "12" },
                        { question: "Which number is a prime number: 15, 17, 18, 21?", options: ["15", "17", "18", "21"], answer: "17" },
                        { question: "What is 600 + 400?", options: ["900", "1000", "1100", "1200"], answer: "1000" },
                        { question: "If a book has 250 pages and you read 100, how many pages are left?", options: ["120", "130", "140", "150"], answer: "150" },
                        { question: "What is 300 - 90?", options: ["190", "200", "210", "220"], answer: "210" },
                        { question: "How many months are in 3 years?", options: ["24", "30", "36", "48"], answer: "36" },
                        { question: "What is 15 x 3?", options: ["40", "42", "45", "48"], answer: "45" },
                        { question: "What is 25% of 120?", options: ["20", "25", "30", "35"], answer: "30" },
                        { question: "What is 750 + 250?", options: ["900", "950", "1000", "1050"], answer: "1000" },
                        { question: "If a class needs 4 markers per table and there are 8 tables, how many markers are needed?", options: ["28", "30", "32", "34"], answer: "32" },
                        { question: "What is 160 divided by 8?", options: ["15", "18", "20", "22"], answer: "20" },
                        { question: "Which number is a factor of 24: 5, 7, 8, 9?", options: ["5", "7", "8", "9"], answer: "8" }
                    ]
                },
                {
                    name: "Math for 2nd Grade",
                    id: "grade2_math",
                    questions: [
                        { question: "What is 250 + 175?", options: ["400", "425", "450", "475"], answer: "425" },
                        { question: "If a baker made 100 cakes and sold 65, how many are left?", options: ["25", "30", "35", "40"], answer: "35" },
                        { question: "What is 150 - 45?", options: ["95", "100", "105", "115"], answer: "105" },
                        { question: "What is the area of a rectangle with length 8 cm and width 5 cm?", options: ["13 sq cm", "26 sq cm", "40 sq cm", "45 sq cm"], answer: "40 sq cm" },
                        { question: "What is 12 x 11?", options: ["121", "132", "144", "156"], answer: "132" },
                        { question: "What is 20% of 100?", options: ["10", "15", "20", "25"], answer: "20" },
                        { question: "What is 300 + 450?", options: ["700", "750", "800", "850"], answer: "750" },
                        { question: "A library has 20 shelves, and each shelf holds 50 books. How many books in total?", options: ["70", "100", "1000", "2000"], answer: "1000" },
                        { question: "What is 144 divided by 12?", options: ["10", "11", "12", "13"], answer: "12" },
                        { question: "Which number is a prime number: 4, 6, 7, 9?", options: ["4", "6", "7", "9"], answer: "7" },
                        { question: "What is 320 + 180?", options: ["450", "480", "500", "520"], answer: "500" },
                        { question: "If a farm has 200 chickens and 75 cows, how many more chickens than cows?", options: ["115", "120", "125", "130"], answer: "125" },
                        { question: "What is 280 - 90?", options: ["170", "180", "190", "200"], answer: "190" },
                        { question: "What is the perimeter of a triangle with sides 10 cm, 12 cm, and 15 cm?", options: ["30 cm", "32 cm", "37 cm", "40 cm"], answer: "37 cm" },
                        { question: "What is 15 x 9?", options: ["125", "130", "135", "140"], answer: "135" },
                        { question: "What is 25% of 200?", options: ["40", "50", "60", "70"], answer: "50" },
                        { question: "What is 450 + 350?", options: ["700", "750", "800", "850"], answer: "800" },
                        { question: "If 3 friends equally share 36 cookies, how many cookies does each friend get?", options: ["10", "11", "12", "13"], answer: "12" },
                        { question: "What is 180 divided by 15?", options: ["10", "11", "12", "13"], answer: "12" },
                        { question: "Which number is a composite number: 11, 13, 14, 17?", options: ["11", "13", "14", "17"], answer: "14" },
                        { question: "What is 500 + 420?", options: ["900", "920", "950", "980"], answer: "920" },
                        { question: "If a box weighs 350 grams and you add 150 grams, what is the total weight?", options: ["400g", "450g", "500g", "550g"], answer: "500g" },
                        { question: "What is 600 - 230?", options: ["350", "370", "390", "400"], answer: "370" },
                        { question: "How many months are in 5 years?", options: ["48", "50", "60", "72"], answer: "60" },
                        { question: "What is 18 x 7?", options: ["116", "126", "136", "146"], answer: "126" },
                        { question: "What is one-fifth of 250?", options: ["40", "45", "50", "55"], answer: "50" },
                        { question: "What is 650 + 280?", options: ["900", "910", "920", "930"], answer: "930" },
                        { question: "If a car travels 50 miles per hour, how far will it travel in 6 hours?", options: ["250 miles", "280 miles", "300 miles", "320 miles"], answer: "300 miles" },
                        { question: "What is 240 divided by 20?", options: ["10", "11", "12", "13"], answer: "12" },
                        { question: "Which number is divisible by 3: 22, 25, 27, 29?", options: ["22", "25", "27", "29"], answer: "27" },
                        { question: "What is 700 + 350?", options: ["1000", "1050", "1100", "1150"], answer: "1050" },
                        { question: "If you save $15 each week, how much will you save in 8 weeks?", options: ["$100", "$110", "$120", "$130"], answer: "$120" },
                        { question: "What is 800 - 420?", options: ["350", "380", "400", "420"], answer: "380" },
                        { question: "What is the area of a square with a side length of 9 cm?", options: ["36 sq cm", "49 sq cm", "64 sq cm", "81 sq cm"], answer: "81 sq cm" },
                        { question: "What is 20 x 15?", options: ["250", "280", "300", "320"], answer: "300" },
                        { question: "What is 75% of 120?", options: ["80", "90", "100", "110"], answer: "90" },
                        { question: "What is 880 + 120?", options: ["950", "980", "1000", "1020"], answer: "1000" },
                        { question: "If there are 12 eggs in a dozen, how many eggs are in 4 dozen?", options: ["36", "48", "50", "60"], answer: "48" },
                        { question: "What is 300 divided by 25?", options: ["10", "12", "14", "15"], answer: "12" },
                        { question: "Which number is an odd number: 144, 156, 169, 180?", options: ["144", "156", "169", "180"], answer: "169" },
                        { question: "What is 950 + 50?", options: ["980", "990", "1000", "1050"], answer: "1000" },
                        { question: "If a game costs $45 and you have $28, how much more money do you need?", options: ["$15", "$17", "$20", "$22"], answer: "$17" },
                        { question: "What is 1000 - 550?", options: ["400", "420", "450", "480"], answer: "450" },
                        { question: "How many days are in a leap year?", options: ["360", "365", "366", "370"], answer: "366" },
                        { question: "What is 25 x 4?", options: ["80", "90", "100", "110"], answer: "100" },
                        { question: "What is 50% of 300?", options: ["100", "120", "150", "200"], answer: "150" },
                        { question: "What is 1200 + 300?", options: ["1400", "1500", "1600", "1700"], answer: "1500" },
                        { question: "If each book has 20 chapters, and you read 6 books, how many chapters have you read?", options: ["100", "110", "120", "130"], answer: "120" },
                        { question: "What is 400 divided by 8?", options: ["40", "45", "50", "55"], answer: "50" },
                        { question: "Which number is a perfect square: 20, 25, 30, 35?", options: ["20", "25", "30", "35"], answer: "25" }
                    ]
                },
                {
                    name: "Math for 3rd Grade",
                    id: "grade3_math",
                    questions: [
                        { question: "What is the product of 15 and 4?", options: ["45", "50", "60", "75"], answer: "60" },
                        { question: "If a car travels 60 miles in 2 hours, what is its average speed?", options: ["20 mph", "30 mph", "40 mph", "120 mph"], answer: "30 mph" },
                        { question: "What is 1/2 as a decimal?", options: ["0.2", "0.5", "0.12", "0.25"], answer: "0.5" },
                        { question: "If a shirt costs $20 and is on sale for 10% off, what is the sale price?", options: ["$18", "$15", "$10", "$2"], answer: "$18" },
                        { question: "What is 5 cubed (5^3)?", options: ["15", "25", "125", "50"], answer: "125" },
                        { question: "How many milliliters are in 2 liters?", options: ["20 ml", "200 ml", "2000 ml", "20000 ml"], answer: "2000 ml" },
                        { question: "What is the square root of 64?", options: ["6", "7", "8", "9"], answer: "8" },
                        { question: "If you have a pizza cut into 8 slices and you eat 3, what fraction of the pizza is left?", options: ["3/8", "1/2", "5/8", "1/4"], answer: "5/8" },
                        { question: "What is the sum of the first 5 odd numbers (1, 3, 5, 7, 9)?", options: ["20", "25", "30", "35"], answer: "25" },
                        { question: "What is 0.75 as a fraction in simplest form?", options: ["1/2", "3/4", "7/10", "1/4"], answer: "3/4" },
                        { question: "What is the volume of a cube with side length 3 cm?", options: ["9 cubic cm", "18 cubic cm", "27 cubic cm", "36 cubic cm"], answer: "27 cubic cm" },
                        { question: "If a recipe calls for 1/2 cup of flour and you want to double the recipe, how much flour do you need?", options: ["1/4 cup", "1 cup", "1 1/2 cups", "2 cups"], answer: "1 cup" },
                        { question: "What is 2.5 x 10?", options: ["0.25", "2.5", "25", "250"], answer: "25" },
                        { question: "How many centimeters are in 3 meters?", options: ["30 cm", "300 cm", "3000 cm", "3 cm"], answer: "300 cm" },
                        { question: "What is 12 squared (12^2)?", options: ["24", "120", "144", "169"], answer: "144" },
                        { question: "If a class has 30 students and 2/3 are girls, how many girls are there?", options: ["10", "15", "20", "25"], answer: "20" },
                        { question: "What is the greatest common factor (GCF) of 12 and 18?", options: ["2", "3", "6", "9"], answer: "6" },
                        { question: "What is 0.4 + 0.3?", options: ["0.1", "0.7", "0.07", "1.0"], answer: "0.7" },
                        { question: "If you buy 3 apples for $1.50, how much does one apple cost?", options: ["$0.25", "$0.50", "$0.75", "$1.00"], answer: "$0.50" },
                        { question: "What is the next number in the pattern: 2, 4, 6, 8, ______?", options: ["9", "10", "11", "12"], answer: "10" },
                        { question: "What is the least common multiple (LCM) of 4 and 6?", options: ["12", "18", "24", "36"], answer: "12" },
                        { question: "Convert 2 hours into minutes.", options: ["60 minutes", "90 minutes", "120 minutes", "180 minutes"], answer: "120 minutes" },
                        { question: "What is 3.5 - 1.2?", options: ["2.1", "2.3", "2.5", "2.7"], answer: "2.3" },
                        { question: "If a square has an area of 25 square cm, what is the length of one side?", options: ["4 cm", "5 cm", "6 cm", "10 cm"], answer: "5 cm" },
                        { question: "What is 3/4 + 1/4?", options: ["1/2", "3/4", "1", "5/4"], answer: "1" },
                        { question: "What is the average of 10, 20, and 30?", options: ["15", "20", "25", "30"], answer: "20" },
                        { question: "If a bus leaves at 8:15 AM and arrives at 9:00 AM, how long was the ride?", options: ["30 minutes", "40 minutes", "45 minutes", "50 minutes"], answer: "45 minutes" },
                        { question: "What is 0.1 x 0.1?", options: ["0.01", "0.1", "1", "10"], answer: "0.01" },
                        { question: "What is the Roman numeral for 10?", options: ["V", "L", "X", "C"], answer: "X" },
                        { question: "If you rotate a figure 90 degrees clockwise, what direction does it turn?", options: ["Left", "Right", "Up", "Down"], answer: "Right" },
                        { question: "What is the equivalent fraction to 1/3 with a denominator of 9?", options: ["2/9", "3/9", "4/9", "6/9"], answer: "3/9" },
                        { question: "What is the expanded form of 345?", options: ["30+4+5", "300+40+5", "3+4+5", "3000+400+50"], answer: "300+40+5" },
                        { question: "If a temperature is 5 degrees Celsius and drops by 7 degrees, what is the new temperature?", options: ["2¬∞C", "-2¬∞C", "12¬∞C", "-12¬∞C"], answer: "-2¬∞C" },
                        { question: "What is 4.8 divided by 2?", options: ["2.1", "2.2", "2.3", "2.4"], answer: "2.4" },
                        { question: "How many sides does a rhombus have?", options: ["3", "4", "5", "6"], answer: "4" },
                        { question: "What is the value of the digit '7' in 472?", options: ["7", "70", "700", "7000"], answer: "70" },
                        { question: "If a shirt costs $15 and pants cost $25, how much do they cost together?", options: ["$30", "$35", "$40", "$45"], answer: "$40" },
                        { question: "What is the difference between 90 and 45?", options: ["35", "40", "45", "50"], answer: "45" },
                        { question: "What is 1/4 of 16?", options: ["2", "3", "4", "5"], answer: "4" },
                        { question: "What is 0.5 + 0.5?", options: ["0.1", "0.5", "1", "1.5"], answer: "1" },
                        { question: "If a train travels at 70 km/h for 3 hours, how far does it travel?", options: ["140 km", "180 km", "210 km", "240 km"], answer: "210 km" },
                        { question: "What is the value of 'x' in x + 5 = 12?", options: ["5", "7", "8", "12"], answer: "7" },
                        { question: "How many years are in a decade?", options: ["5", "10", "25", "100"], answer: "10" },
                        { question: "What is the simplified form of the fraction 6/8?", options: ["1/2", "2/3", "3/4", "5/8"], answer: "3/4" },
                        { question: "What is 10 to the power of 2 (10^2)?", options: ["20", "100", "1000", "10000"], answer: "100" },
                        { question: "If you have $5 and want to buy items that cost $1.25 each, how many can you buy?", options: ["3", "4", "5", "6"], answer: "4" },
                        { question: "What is 1/2 of 100?", options: ["25", "40", "50", "75"], answer: "50" },
                        { question: "What is the value of 'y' in 2y = 18?", options: ["6", "7", "8", "9"], answer: "9" },
                        { question: "How many sides does a trapezoid have?", options: ["3", "4", "5", "6"], answer: "4" }
                    ]
                }
            ];

            // DOM elements
            const levelListDiv = document.getElementById('level-list');
            const quizSectionDiv = document.getElementById('quiz-section');
            const backButton = document.getElementById('back-button');
            const levelTitle = document.getElementById('level-title');
            const questionNumberDisplay = document.getElementById('question-number');
            const questionDisplay = document.getElementById('question-display');
            const optionsContainer = document.getElementById('options-container');
            const submitAnswerButton = document.getElementById('submit-answer');
            const nextQuestionButton = document.getElementById('next-question');
            const feedbackDisplay = document.getElementById('feedback-display');
            const quizCompleteMessage = document.getElementById('quiz-complete-message');

            let currentLevel = null;
            let currentQuestionIndex = 0;
            let selectedOption = null;

            // Function to render the list of levels
            function renderLevels() {
                levelListDiv.innerHTML = ''; // Clear previous list
                levels.forEach(level => {
                    const listItem = document.createElement('div');
                    listItem.className = 'list-item bg-blue-100 text-blue-800 p-4 rounded-lg cursor-pointer text-xl font-medium shadow-md hover:bg-blue-200';
                    listItem.textContent = level.name;
                    listItem.dataset.levelId = level.id; // Store ID for easy lookup
                    listItem.addEventListener('click', () => showQuiz(level));
                    levelListDiv.appendChild(listItem);
                });
            }

            // Function to show the quiz section for a given level
            function showQuiz(level, startIndex = 0) {
                currentLevel = level;
                currentQuestionIndex = startIndex;
                levelListDiv.classList.add('hidden'); // Hide level list
                quizSectionDiv.classList.remove('hidden'); // Show quiz section

                // Reset quiz section state
                quizCompleteMessage.classList.add('hidden');
                submitAnswerButton.classList.remove('hidden');
                nextQuestionButton.classList.add('hidden');
                optionsContainer.classList.remove('pointer-events-none', 'opacity-50'); // Enable options interaction

                levelTitle.textContent = level.name;
                displayQuestion(); // Display the first question

                // Save user's current level to Firestore ONLY if Firebase is initialized
                if (firebaseInitialized) {
                    saveUserProgress(userId, level.id, currentQuestionIndex);
                }
            }

            // Function to display the current question and its options
            function displayQuestion() {
                if (currentLevel && currentQuestionIndex < currentLevel.questions.length) {
                    const q = currentLevel.questions[currentQuestionIndex];
                    questionNumberDisplay.textContent = `Question ${currentQuestionIndex + 1} of ${currentLevel.questions.length}`;
                    questionDisplay.textContent = q.question;

                    // Clear previous options
                    optionsContainer.innerHTML = '';
                    selectedOption = null; // Reset selected option

                    // Shuffle options before displaying
                    const shuffledOptions = shuffleArray([...q.options]);

                    // Create and append radio buttons for each option
                    shuffledOptions.forEach((option, index) => {
                        const optionDiv = document.createElement('label');
                        optionDiv.className = 'option-item block text-gray-700 hover:bg-blue-50';
                        optionDiv.innerHTML = `
                            <input type="radio" name="quiz_option" value="${option}" class="form-radio h-5 w-5 text-blue-600">
                            <span class="ml-3 text-lg">${option}</span>
                        `;
                        optionsContainer.appendChild(optionDiv);

                        // Add event listener to each radio button to track selection
                        optionDiv.querySelector('input[type="radio"]').addEventListener('change', (event) => {
                            selectedOption = event.target.value;
                            feedbackDisplay.textContent = ''; // Clear feedback when a new option is selected
                            feedbackDisplay.className = 'text-lg mt-4 font-medium'; // Reset feedback style
                        });
                    });

                    feedbackDisplay.textContent = ''; // Clear feedback
                    feedbackDisplay.className = 'text-lg mt-4 font-medium'; // Reset feedback style
                    submitAnswerButton.classList.remove('hidden'); // Ensure submit button is visible
                    nextQuestionButton.classList.add('hidden'); // Ensure next button is hidden
                    optionsContainer.classList.remove('pointer-events-none', 'opacity-50'); // Re-enable options
                } else {
                    // Quiz is complete
                    quizCompleteMessage.classList.remove('hidden');
                    questionNumberDisplay.textContent = '';
                    questionDisplay.textContent = '';
                    optionsContainer.innerHTML = ''; // Clear options
                    submitAnswerButton.classList.add('hidden'); // Hide submit
                    nextQuestionButton.classList.add('hidden'); // Hide next
                }
            }

            // Function to handle answer submission
            submitAnswerButton.addEventListener('click', () => {
                if (!selectedOption) {
                    showModal("Please select an answer before submitting.");
                    return;
                }

                if (currentLevel && currentQuestionIndex < currentLevel.questions.length) {
                    const correctAnswer = currentLevel.questions[currentQuestionIndex].answer;
                    // Normalize answers for comparison (case-insensitive)
                    if (selectedOption.toLowerCase() === correctAnswer.toLowerCase()) {
                        feedbackDisplay.textContent = "Correct! Well done!";
                        feedbackDisplay.className = 'text-lg mt-4 font-medium text-green-600';
                    } else {
                        feedbackDisplay.textContent = `Incorrect. The correct answer was "${correctAnswer}".`;
                        feedbackDisplay.className = 'text-lg mt-4 font-medium text-red-600';
                    }
                    submitAnswerButton.classList.add('hidden'); // Hide submit
                    nextQuestionButton.classList.remove('hidden'); // Show next
                    optionsContainer.classList.add('pointer-events-none', 'opacity-50'); // Disable options after submission
                }
            });

            // Function to move to the next question
            nextQuestionButton.addEventListener('click', () => {
                currentQuestionIndex++;
                displayQuestion(); // Display the next question or quiz complete message

                // Save progress after moving to next question ONLY if Firebase is initialized
                if (firebaseInitialized && currentLevel) { // Check currentLevel to avoid saving if quiz is complete
                    saveUserProgress(userId, currentLevel.id, currentQuestionIndex);
                }
            });

            // Function to go back to the level list
            backButton.addEventListener('click', () => {
                quizSectionDiv.classList.add('hidden'); // Hide quiz section
                levelListDiv.classList.remove('hidden'); // Show level list
                quizCompleteMessage.classList.add('hidden'); // Hide quiz complete message
                optionsContainer.classList.remove('pointer-events-none', 'opacity-50'); // Ensure options are re-enabled
                currentLevel = null;
                currentQuestionIndex = 0; // Reset index for next quiz
            });

            // Initial render of levels
            renderLevels();
        }
    </script>
</body>
</html>
